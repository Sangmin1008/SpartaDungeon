# SpartaDungeon
## 주요 기능
- 기본 이동 및 점프
- 체력바 UI
- 동적 환경 조사
- 점프대
- 아이템 데이터
- 아이템 사용
- 움직이는 플랫폼 구현
- 상호작용 가능한 오브젝트 표시
- 3인칭 시점(직접 Offset 조정)

## 기본 이동 및 점프
Unity의 New Input System과 EventChannel ScriptableObject 구조를 활용하여, 입력 로직과 캐릭터 컨트롤을 완전히 분리했습니다.

입력 처리는 InputController가 담당하며, 사용자 입력은 관련 EventChannel을 통해 브로드캐스트됩니다.

PlayerController는 해당 채널의 이벤트를 구독하여 실제 동작(이동, 점프 등)을 수행합니다.

- 이동: WASD 또는 방향키로 캐릭터를 이동할 수 있습니다. 카메라가 바라보는 방향을 기준으로 움직입니다.
- 점프: Space 키로 점프할 수 있으며, 점프 키를 짧게 누르면 낮게, 길게 누르면 더 높이 점프합니다.
- 공중 점프: 일정 시간 동안 공중에서 추가 점프가 가능하도록 설정되어 있습니다.
- 카메라 기반 방향: 이동 방향은 현재 카메라 시점을 기준으로 계산됩니다.
- 중력 보정: 자연스러운 점프/낙하 감각을 위해 낙하 시 중력을 강화하거나, 점프 키를 짧게 누르면 더 낮게 점프합니다.

## 체력바 UI
체력 수치 관리 및 UI 업데이트는 Condition 컴포넌트가 담당합니다.

실제 체력 변화(피해/회복)는 UIConditionController를 통해 이벤트 기반으로 반영됩니다.

FloatEventChannelSO를 사용해 체력 변화 이벤트(데미지, 회복)를 처리합니다.

- 피격: 외부 시스템에서 damageEventChannel.RaiseEvent(float)만 호출하면 자동으로 체력이 감소합니다.
- 회복: cureEventChannel을 통해 회복도 동일한 방식으로 처리됩니다.

## 동적 환경 조사 & 상호작용 가능한 오브젝트 표시
플레이어 시야 내 상호작용 가능한 오브젝트를 탐지합니다.

UI 프롬프트로 상호작용 힌트를 제공하며, 사용자가 입력 시 대응 행동을 실행하는 구조로 설계되었습니다.

- 중앙 레이캐스트 감지: 매 프레임 일정 간격(checkRate)으로 카메라 중심에서 전방으로 Raycast를 발사해 탐지합니다.
- 상호작용 UI 표시: 탐지된 오브젝트가 IInteractable을 구현하고 있을 경우, 해당 오브젝트의 프롬프트를 UI에 표시합니다.
- 입력 이벤트 연동: 입력 시스템에서 interactEventChannel이 발생하면 현재 대상의 OnInteract() 자동 실행합니다.

## 점프대
플레이어가 점프대 위에 충돌하면 강제 점프를 수행합니다.

점프 강도는 JumpingPlatformDataSO에서 조절 가능하도록 설계되어 있으며, 데이터 중심 접근을 따릅니다.

- 감지: OnCollisionEnter(Collision other) 를 통해 충돌 감지합니다.
- Rigidbody 추출: LayerMask로 Player Layer를 검출합니다. TryGetComponent<>를 통하여 검출할 수도 있습니다.
- 슈퍼 점프: Rigidbody.AddForce()를 통해 Impulse 방식으로 적용되어 즉각적 반응을 유도합니다.

## 아이템 데이터 && 아이템 사용
게임 내 다양한 아이템의 데이터를 관리하기 위해 ScriptableObject를 사용합니다.

아이템의 이름, 설명을 에셋 단위로 별도 관리함으로써 콘텐츠 수정 및 확장에 용이한 구조를 구현합니다.

외부에서 공중 점프 효과가 지속될 시간을 받아서 내부 변수에 저장하고, AirJumpCoroutine() 코루틴을 시작합니다.

코루틴 AirJumpCoroutine()는 경과 시간을 체크하며 duration 동안 대기 후, 효과 지속 변수를 초기화하여 공중 점프 효과를 종료합니다.

## 움직이는 플랫폼 구현
플랫폼은 각 경유지에서 잠시 멈췄다가 다음 위치로 이동합니다.

플레이어가 플랫폼에 올라탔을 때 해당 플랫폼의 자식으로 설정되어 함께 이동하도록 보장됩니다.

- 플랫폼 이동 위치: waypoints 배열에 플랫폼이 이동할 위치(Transform) 들을 순서대로 설정합니다.
- 플레이어 탑승 처리: OnCollisionEnter로 플레이어가 플랫폼에 접촉하면 부모-자식 관계 설정하여 플랫폼과 함께 움직이도록 합니다.
- 플레이어 하차 처리: OnCollisionExit로 플레이어가 플랫폼에서 벗어나면 부모-자식 관계를 해제합니다.

## 3인칭 시점
카메라는 player의 위치를 기준으로 offset 만큼 떨어진 위치에서 바라보는 구조입니다.

offset 값을 조정하면 1인칭과 3인칭 시점 전환이 가능합니다.

인스펙터에서 직접 Offset을 변동시켜줘야 합니다.
